---
title: yoloã§ç‰©ä½“æ¤œçŸ¥ã‚’ã‚„ã£ã¦ã¿ã‚‹
tags:
  - Python
  - macmini
  - ç‰©ä½“æ¤œçŸ¥
  - uv(astral-sh)
  - yolo11
private: false
updated_at: '2025-02-03T22:25:02+09:00'
id: 7205c71387679e265aad
organization_url_name: null
slide: false
ignorePublish: false
---
# ã‚ã„ã•ã¤
QiitaåˆæŠ•ç¨¿ã«ãªã‚‹ãŸã‚ã©ã‚“ãªæ„Ÿã˜ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€å…ˆäººã®çœŸä¼¼ã‚’ã¨ã‚Šã‚ãˆãšã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚æ™®æ®µã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¸­å¿ƒã®Webã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§pythonã¨Rustã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚ãŸã¾ã«Nextjsã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚‚ã™ã‚‹ãã‚‰ã„ã§ã™ã€‚  
ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã¯ã€ã‚‚ã†å°‘ã—ã§2å¹´ã«ãªã‚‹ãƒšãƒ¼ãƒšãƒ¼ã§ã™ã€‚ãŠæ‰‹æŸ”ã‚‰ã‹ã«ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚
ã¡ãªã¿ã«æœ€è¿‘åˆã®macosã¨ãªã‚‹Mac miniã‚’è²·ã„ã¾ã—ãŸã€‚ä»Šã¾ã§Windowsä¸€ç­‹ã ã£ãŸã®ã§ã€ã‚­ãƒ¼é…ç½®ãŒé•å’Œæ„Ÿã§ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚

# ã¯ã˜ã‚ã«
ä»Šåƒã„ã¦ã„ã‚‹ä¼šç¤¾ã¯ç‰©ä½“æ¤œçŸ¥ã¨ã‹ã‚‚ã™ã‚‹ã«ã‚‚é–¢ã‚ã‚‰ãšç§ã¯ã‚„ã£ãŸã“ã¨ã‚ã‚Šã¾ã›ã‚“ã€‚ãªã®ã§ã©ã‚“ãªã‚‚ã‚“ã‹ã¨æ€ã„ã‚„ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚
å…¨ãã‚ã‹ã‚‰ãªã„ã¨è¨€ã„ã¤ã¤Yoloã¨ã„ã†ã®ã¯èã„ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚æœ€æ–°ã¯Yolo11ãªã®ã§ãã¡ã‚‰ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ï¼

https://docs.ultralytics.com/ja/models/yolo11/

# ç’°å¢ƒ
ç§ã®ç’°å¢ƒã¯ã“ã‚“ãªæ„Ÿã˜ã§ã‚„ã‚Šã¾ã™ã€‚

| é …ç›®  | è©³ç´° |
|------|------|
| **OS** | macOS 15.2 |
| **CPU** | Apple M4 Pro |
| **ãƒ¡ãƒ¢ãƒª** | 24 GB |
| **GPU** | Apple M4 Pro (16ã‚³ã‚¢) |

<br>

| é …ç›®  | è©³ç´° |
|------|------|
| **Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³** | 3.12.8 |
| **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«** | uv |

Rustã‚‚ä½¿ã£ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šuvã«æººæ„›ã—ã¦ã„ã¾ã™ã€‚

# ã„ã–ç‰©ä½“æ¤œçŸ¥ï¼

ã¾ãšã¯ç’°å¢ƒæ§‹ç¯‰ã¨å¿…è¦ãªã‚‚ã®ã®installã€‚
```bash
uv init yolo-test
uv python install 3.12
uv python pin 3.12
uv add ultralytics opencv-python
```
ã‚„ã£ã±å°‘ãªã„ã‚³ãƒãƒ³ãƒ‰ã§è«¸ã€…ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ãã‚‹ã®æœ€é«˜ã€‚

ã¡ãªã¿ã«3.13.1tã§installã—ã‚ˆã†ã¨ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã§ã¾ã—ãŸã€‚

copilotã®åŠ›ã‚’ä½¿ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã‚‹ã€‚

```py:main.py
import cv2
from ultralytics import YOLO

def main():
    
    model = YOLO("yolo11n.pt")
    
    # set the input and output video paths
    input_video_path = "data/input_video.mp4"
    output_video_path = "data/output_video.mp4"
    
    # read the input video information
    cap = cv2.VideoCapture(input_video_path)
    fps = int(cap.get(cv2.CAP_PROP_FPS))
    width = int(cap.get(cv2.CAP_PROP_FRAME_WIDTH))
    height = int(cap.get(cv2.CAP_PROP_FRAME_HEIGHT))
    
    print(f"video information: fps={fps}, width={width}, height={height}")
    
    # create the output video writer
    out = cv2.VideoWriter(output_video_path, cv2.VideoWriter_fourcc(*'mp4v'), fps, (width, height))
    
    # read the video frame by frame
    while cap.isOpened():
        ret, frame = cap.read()
        if not ret:
            break
        
        # rotate the frame
        frame = cv2.rotate(frame, cv2.ROTATE_180)
        
        # detect objects in the frame
        result_list = model(frame)
        
        # draw the bounding boxes
        for result in result_list:
            frame = result.plot()
        
        # write the frame to the output video
        out.write(frame)
        
        if cv2.waitKey(1) & 0xFF == ord('q'):
            break
        
    cap.release()
    out.release()
    
    print("Done!")

if __name__ == "__main__":
    main()

```

å‹•ç”»ãŒå‹æ‰‹ã«åè»¢ã™ã‚‹ã®ã§ã€ç›´ã™å‡¦ç†ã‚’å…¥ã‚Œã¦ã„ã‚‹ã€‚
```py
# rotate the frame
frame = cv2.rotate(frame, cv2.ROTATE_180)
```

ã‚ã¨ã¯inputã®å‹•ç”»ã‚’æº–å‚™ã™ã‚‹ã€‚ã¡ã‚‡ã†ã©ã‚¹ãƒãƒ›ã«æ„›çŠ¬ã¨ãƒ«ãƒ³ãƒã®æˆ¦ã„ãŒã‚ã£ãŸã®ã§ãã‚Œã‚’ä½¿ã†ã€‚

ã„ã–å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ã€ã€ã€
```bash
uv run main.py
video information: fps=30, width=1280, height=720

0: 384x640 1 dog, 24.8ms
Speed: 1.4ms preprocess, 24.8ms inference, 0.6ms postprocess per image at shape (1, 3, 384, 640)

0: 384x640 1 person, 1 dog, 18.0ms
Speed: 0.7ms preprocess, 18.0ms inference, 0.3ms postprocess per image at shape (1, 3, 384, 640)

```
å‹•ã„ã¦ã„ã‚‹ï¼

![output_video_2.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3722589/70052756-e62f-3e45-3fab-2ae2f72a6728.gif)

ãƒ«ãƒ³ãƒã¯ãƒœã‚¦ãƒ«ã¨åˆ¤åˆ¥ã•ã‚Œã‚‹ã‚“ã ãªğŸ§

# æœ€å¾Œã«
ä»¥å¤–ã¨ç°¡å˜ã ã£ãŸã€‚ã„ã¤ã‹ãƒšãƒƒãƒˆã‚«ãƒ¡ãƒ©ã«ã—ã¦å¯ã¦ã‚‹æ™‚é–“ã¨ã‹è¨ˆæ¸¬ã—ãŸã„ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã‹ã‚‰ã‚‚é©åº¦ã«æŠ•ç¨¿ã—ã‚ˆã†ã‹ãªã¨æ€ã†ã®ã§ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ï¼ï¼ˆã‚‚ã£ã¨ãŸã‚ã«ãªã‚‹ã‚‚ã®ã‚’æŠ•ç¨¿ã—ãŸã„ï¼ï¼‰
é€±ï¼‘ãã‚‰ã„ã§æŠ•ç¨¿ã—ã‚ˆã†ã‹ãªï¼
